(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"./docs/index.mdx":function(e,n,t){"use strict";t.r(n),t.d(n,"default",function(){return a});var c=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),b=(t("react"),t("./node_modules/@mdx-js/react/dist/index.es.js")),l={},o="wrapper";function a(e){var n=e.components,t=Object(c.a)(e,["components"]);return Object(b.b)(o,Object.assign({},l,t,{components:n,mdxType:"MDXLayout"}),Object(b.b)("h1",{id:"document"},"Document"),Object(b.b)("h2",{id:"\u4f7f\u7528"},"\u4f7f\u7528"),Object(b.b)("p",null,"1\u3001 \u6dfb\u52a0\u4f9d\u8d56"),Object(b.b)("p",null,Object(b.b)("inlineCode",{parentName:"p"},"npm install @jiumao/policy")," || ",Object(b.b)("inlineCode",{parentName:"p"},"yarn add @jiumao/policy")),Object(b.b)("p",null,"2\u3001 \u5f15\u7528"),Object(b.b)("pre",null,Object(b.b)("code",Object.assign({parentName:"pre"},{}),"import Policy form '@jiumao/policy';\n")),Object(b.b)("p",null,"3\u3001 \u521d\u59cb\u5316"),Object(b.b)("pre",null,Object(b.b)("code",Object.assign({parentName:"pre"},{}),"const actions = [\n  { module: 'module1', action: 'action1' },\n  { module: 'module1', action: 'action2' },\n  { module: 'module1', action: 'action3' },\n  { module: 'module2', action: 'action1' },\n  { module: 'module2', action: 'action2' },\n]\n\nconst policy = new Policy();\n\npolicy.addPolicy({\n  version: 1,\n  statement: [\n    {\n      effect: 'allow',\n      action: [\n        'module1/*'\n      ]\n    }\n  ]\n})\n")),Object(b.b)("p",null,"4\u3001 \u9a8c\u8bc1"),Object(b.b)("pre",null,Object(b.b)("code",Object.assign({parentName:"pre"},{}),"policy.multipleVerify('module1/action1'); // true\npolicy.multipleVerify(['module1/action1', 'module1/action2', ]); // true\n\npolicy.combinationVerify('!module1/action1'); // false\npolicy.combinationVerify('module1/action1 && module2/action1'); // false\npolicy.combinationVerify('module1/action1 || module2/action1'); // true\n")),Object(b.b)("h2",{id:"api"},"API"),Object(b.b)("h3",{id:"\u5c5e\u6027"},"\u5c5e\u6027"),Object(b.b)("p",null,"a. moduleMap"),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"\u6a21\u5757\u64cd\u4f5cMap")),Object(b.b)("pre",null,Object(b.b)("code",Object.assign({parentName:"pre"},{}),"[module: string]: string[]\n")),Object(b.b)("p",null,"b. allowActions"),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"\u5141\u8bb8\u64cd\u4f5c\u96c6\u5408")),Object(b.b)("pre",null,Object(b.b)("code",Object.assign({parentName:"pre"},{}),"string[]\n")),Object(b.b)("p",null,"c. denyActions"),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"\u7981\u6b62\u64cd\u4f5c\u96c6\u5408")),Object(b.b)("pre",null,Object(b.b)("code",Object.assign({parentName:"pre"},{}),"string[]\n")),Object(b.b)("h3",{id:"\u65b9\u6cd5"},"\u65b9\u6cd5"),Object(b.b)("p",null,"a. addPolicy"),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"\u6dfb\u52a0\u7b56\u7565")),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},"\u53c2\u6570")),Object(b.b)("p",null,"policy \u9700\u8981\u6dfb\u52a0\u7684\u7b56\u7565"),Object(b.b)("pre",null,Object(b.b)("code",Object.assign({parentName:"pre"},{}),"interface IStatement {\n  // \u6388\u6743\u6548\u529b allow: \u5141\u8bb8 deny: \u7981\u6b62\n  effect: 'allow' | 'deny';\n  // \u64cd\u4f5c\u5217\u8868\n  action: '*' | string[];\n}\n\ninterface IPolicyData {\n  version: string | number;\n  statement: IStatement[]\n}\n\neg: {\n  version: 1,\n  statement: [\n    {\n      effect: 'allow',\n      action: 'module/*'\n    }\n  ]\n}\n")),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},"\u8fd4\u56de\u503c")),Object(b.b)("p",null,"\u65e0"),Object(b.b)("p",null,"b. singleVerify"),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"\u5355\u4e2aaction\u9a8c\u8bc1")),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},"\u53c2\u6570")),Object(b.b)("p",null,"action"),Object(b.b)("pre",null,Object(b.b)("code",Object.assign({parentName:"pre"},{}),"string\n\neg: '*'\n")),Object(b.b)("p",null,"c. multipleVerify"),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"\u5355\u4e2a/\u591a\u4e2aaction\u9a8c\u8bc1")),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},"\u53c2\u6570")),Object(b.b)("p",null,"actions"),Object(b.b)("pre",null,Object(b.b)("code",Object.assign({parentName:"pre"},{}),"string | string[]\n\neg: ['module1/action1', ...]\n")),Object(b.b)("p",null,"d. combinationVerify"),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"\u7ec4\u5408action\u9a8c\u8bc1")),Object(b.b)("blockquote",null,Object(b.b)("p",{parentName:"blockquote"},"\u652f\u6301",Object(b.b)("inlineCode",{parentName:"p"},"!"),"\u3001",Object(b.b)("inlineCode",{parentName:"p"},"&&"),"\u3001",Object(b.b)("inlineCode",{parentName:"p"},"||"))),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},"\u53c2\u6570")),Object(b.b)("pre",null,Object(b.b)("code",Object.assign({parentName:"pre"},{}),"string\n\neg: '!module1/action1'\neg: 'module1/action1' && 'module1/action2'\neg: 'module1/action1' || 'module1/action2'\n")))}a&&a===Object(a)&&Object.isExtensible(a)&&Object.defineProperty(a,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"docs/index.mdx"}}),a.isMDXComponent=!0}}]);